{
  "metadata": {
    "analysis_version": "2.0",
    "timestamp": "2025-11-11T13:20:51Z",
    "analysis_date": "2025-11-11",
    "hostname": "andrejs-mbp",
    "analysis_tool": "cursor-ide-agent",
    "sequential_thinking_used": true
  },
  "system": {
    "os": "macOS 25.1.0 (darwin)",
    "architecture": "arm64",
    "shell": "/bin/zsh",
    "workspace": "/Users/andrejs/Projects/personal/easypost-mcp-project",
    "user": "andrejs",
    "home": "/Users/andrejs"
  },
  "analysis_report": {
    "installed_managers": {
      "version_managers": {
        "mise": {
          "version": "2025.11.3 macos-arm64 (2025-11-07)",
          "status": "active",
          "manages": [
            "node",
            "python",
            "npm",
            "pnpm"
          ],
          "installed_versions": {
            "node": [
              "22.21.1",
              "25.1.0"
            ],
            "python": [
              "3.12.12",
              "3.14.0"
            ],
            "npm": [
              "11.6.2"
            ],
            "pnpm": [
              "10.20.0"
            ]
          },
          "active_versions": {
            "node": "25.1.0",
            "python": "3.14.0",
            "npm": "11.6.2",
            "pnpm": "9.0.0"
          },
          "config_file": "~/.config/mise/config.toml",
          "config_content": {
            "tools": {
              "node": "25",
              "python": "3.14",
              "npm": "latest",
              "pnpm": "latest"
            }
          },
          "binary_paths": [
            "~/.local/share/mise/installs/node/25.1.0/bin",
            "~/.local/share/mise/installs/python/3.14.0/bin",
            "~/.local/share/mise/installs/npm/11.6.2/bin",
            "~/.local/share/mise/installs/pnpm/10.20.0"
          ]
        },
        "pyenv": {
          "status": "installed_but_inactive",
          "version": "2.6.12",
          "manages": [
            "python"
          ],
          "installed_versions": {
            "python": [
              "3.13.0"
            ]
          },
          "active_version": "system",
          "directory": "~/.pyenv",
          "note": "Conflicts with mise for Python management",
          "in_path": false,
          "issue": "Competing version manager, should be removed"
        },
        "nvm": {
          "status": "directory_present_not_activated",
          "directory": "~/.nvm",
          "note": "Directory exists but nvm not in PATH or shell config",
          "issue": "Unused installation taking disk space",
          "recommendation": "Remove if not needed"
        },
        "rbenv": {
          "status": "not_installed"
        },
        "volta": {
          "status": "not_installed"
        },
        "nodenv": {
          "status": "not_installed"
        },
        "goenv": {
          "status": "not_installed"
        },
        "rustup": {
          "status": "not_installed"
        },
        "jenv": {
          "status": "not_installed"
        }
      },
      "package_managers": {
        "homebrew": {
          "version": "latest",
          "status": "active",
          "total_packages": 202,
          "prefix": "/opt/homebrew",
          "binary_path": "/opt/homebrew/bin",
          "python_versions": [
            {
              "package": "python@3.12",
              "version": "3.12.12"
            },
            {
              "package": "python@3.13",
              "version": "3.13.9_1"
            },
            {
              "package": "python@3.14",
              "version": "3.14.0_1"
            }
          ],
          "node_versions": [
            {
              "package": "node",
              "version": "25.1.0_1"
            }
          ],
          "selected_packages": [
            {
              "name": "git",
              "version": "2.51.2"
            },
            {
              "name": "go",
              "version": "1.25.4"
            },
            {
              "name": "postgresql@17",
              "version": "17.x"
            },
            {
              "name": "pyenv",
              "version": "2.6.12"
            }
          ],
          "note": "Overlaps with mise for Python and Node management"
        },
        "npm": {
          "version": "11.6.2",
          "source": "mise (node 25.1.0)",
          "status": "active",
          "binary_path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/npm",
          "global_packages": [
            {
              "name": "@anthropic-ai/mcpb",
              "version": "2.0.1"
            },
            {
              "name": "@continuedev/cli",
              "version": "1.5.11"
            },
            {
              "name": "npm",
              "version": "11.6.2"
            }
          ],
          "total_global_packages": 3
        },
        "pnpm": {
          "expected_version": "10.20.0",
          "actual_version": "9.0.0",
          "source": "mise",
          "status": "version_mismatch",
          "binary_path": "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0/pnpm",
          "issue": "Binary reports wrong version, likely corrupted",
          "global_packages_count": 0
        },
        "pip": {
          "version": "25.3",
          "python_version": "3.14",
          "python_source": "mise python 3.14.0",
          "status": "active",
          "binary_path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/pip",
          "total_packages": 98,
          "selected_packages": [
            {
              "name": "fastapi",
              "version": "0.121.1"
            },
            {
              "name": "fastmcp",
              "version": "2.13.0.2"
            },
            {
              "name": "pydantic",
              "version": "2.12.4"
            },
            {
              "name": "pytest",
              "version": "7.4.4"
            },
            {
              "name": "ruff",
              "version": "0.14.4"
            },
            {
              "name": "black",
              "version": "25.11.0"
            }
          ]
        },
        "gem": {
          "version": "3.0.3.1",
          "ruby_version": "2.6.10p210",
          "status": "active",
          "binary_path": "/usr/bin/gem",
          "source": "system ruby",
          "total_gems": 50,
          "selected_gems": [
            {
              "name": "bundler",
              "version": "1.17.2"
            },
            {
              "name": "nokogiri",
              "version": "1.13.8"
            },
            {
              "name": "rake",
              "version": "12.3.3"
            }
          ]
        },
        "go": {
          "version": "1.25.4",
          "status": "active",
          "binary_path": "/opt/homebrew/bin/go",
          "source": "homebrew",
          "goroot": "/opt/homebrew/Cellar/go/1.25.4/libexec",
          "gopath": "/Users/andrejs/go",
          "gobin": ""
        },
        "cargo": {
          "status": "not_installed"
        },
        "composer": {
          "status": "not_installed"
        },
        "conda": {
          "status": "not_installed"
        },
        "poetry": {
          "status": "not_installed"
        }
      }
    },
    "tool_inventory": {
      "node": {
        "all_instances": [
          {
            "path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/node",
            "version": "25.1.0",
            "manager": "mise",
            "priority": 1,
            "is_active": true
          },
          {
            "path": "/opt/homebrew/bin/node",
            "version": "25.1.0",
            "manager": "homebrew",
            "priority": 2,
            "is_active": false,
            "symlink_target": "../Cellar/node/25.1.0_1/bin/node"
          }
        ],
        "active": {
          "path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/node",
          "version": "25.1.0",
          "manager": "mise"
        },
        "conflicts": [
          {
            "severity": "medium",
            "description": "Duplicate Node.js installation via Homebrew",
            "impact": "Wastes ~80MB disk space",
            "recommendation": "Remove Homebrew node"
          }
        ]
      },
      "python": {
        "all_instances": [
          {
            "path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/python",
            "version": "3.14.0",
            "manager": "mise",
            "priority": 1,
            "is_active": true
          },
          {
            "path": "/opt/homebrew/bin/python3",
            "version": "3.14.0",
            "manager": "homebrew (python@3.14)",
            "priority": 2,
            "is_active": false,
            "symlink_target": "../Cellar/python@3.14/3.14.0_1/bin/python3"
          },
          {
            "path": "/usr/bin/python3",
            "version": "3.9.6",
            "manager": "system",
            "priority": 3,
            "is_active": false
          },
          {
            "path": "/Users/andrejs/.pyenv/versions/3.13.0/bin/python",
            "version": "3.13.0",
            "manager": "pyenv",
            "priority": 0,
            "is_active": false,
            "note": "Not in PATH, shadowed"
          }
        ],
        "active": {
          "path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/python",
          "version": "3.14.0",
          "manager": "mise"
        },
        "conflicts": [
          {
            "severity": "high",
            "description": "Multiple Python version managers competing (mise + pyenv)",
            "impact": "Confusion, ~800MB disk waste",
            "recommendation": "Remove pyenv, keep mise as single manager"
          },
          {
            "severity": "medium",
            "description": "Multiple Homebrew Python versions",
            "impact": "~300MB disk waste",
            "recommendation": "Remove python@3.12 and python@3.13, keep python@3.14 for dependencies"
          }
        ]
      },
      "ruby": {
        "all_instances": [
          {
            "path": "/usr/bin/ruby",
            "version": "2.6.10p210",
            "manager": "system",
            "priority": 1,
            "is_active": true
          }
        ],
        "active": {
          "path": "/usr/bin/ruby",
          "version": "2.6.10p210",
          "manager": "system"
        },
        "conflicts": []
      },
      "go": {
        "all_instances": [
          {
            "path": "/opt/homebrew/bin/go",
            "version": "1.25.4",
            "manager": "homebrew",
            "priority": 1,
            "is_active": true
          }
        ],
        "active": {
          "path": "/opt/homebrew/bin/go",
          "version": "1.25.4",
          "manager": "homebrew"
        },
        "conflicts": []
      },
      "npm": {
        "all_instances": [
          {
            "path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/npm",
            "version": "11.6.2",
            "manager": "mise (via node)",
            "priority": 1,
            "is_active": true
          },
          {
            "path": "/Users/andrejs/.local/share/mise/installs/npm/11.6.2/bin/npm",
            "version": "11.6.2",
            "manager": "mise (direct)",
            "priority": 1,
            "is_active": false
          },
          {
            "path": "/opt/homebrew/bin/npm",
            "version": "11.6.2",
            "manager": "homebrew (via node)",
            "priority": 2,
            "is_active": false
          }
        ],
        "active": {
          "path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/npm",
          "version": "11.6.2",
          "manager": "mise"
        },
        "conflicts": []
      },
      "pnpm": {
        "all_instances": [
          {
            "path": "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0/pnpm",
            "version": "9.0.0",
            "expected_version": "10.20.0",
            "manager": "mise",
            "priority": 1,
            "is_active": true,
            "issue": "Version mismatch - binary corrupted"
          }
        ],
        "active": {
          "path": "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0/pnpm",
          "version": "9.0.0",
          "manager": "mise"
        },
        "conflicts": [
          {
            "severity": "critical",
            "description": "pnpm version mismatch (reports 9.0.0 but path shows 10.20.0)",
            "impact": "May cause package installation failures and unexpected behavior",
            "recommendation": "Reinstall via mise: mise uninstall pnpm && mise install pnpm@latest"
          }
        ]
      },
      "pip": {
        "all_instances": [
          {
            "path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/pip",
            "version": "25.3",
            "manager": "mise (python 3.14)",
            "priority": 1,
            "is_active": true
          },
          {
            "path": "/opt/homebrew/bin/pip3",
            "version": "25.3",
            "manager": "homebrew (python@3.14)",
            "priority": 2,
            "is_active": false
          },
          {
            "path": "/usr/bin/pip3",
            "version": "unknown",
            "manager": "system",
            "priority": 3,
            "is_active": false
          }
        ],
        "active": {
          "path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/pip",
          "version": "25.3",
          "manager": "mise"
        },
        "conflicts": []
      },
      "gem": {
        "all_instances": [
          {
            "path": "/usr/bin/gem",
            "version": "3.0.3.1",
            "manager": "system",
            "priority": 1,
            "is_active": true
          }
        ],
        "active": {
          "path": "/usr/bin/gem",
          "version": "3.0.3.1",
          "manager": "system"
        },
        "conflicts": []
      }
    },
    "path_analysis": {
      "total_entries": 27,
      "current_order": [
        "/Users/andrejs/.console-ninja/.bin",
        "/Users/andrejs/.bun/bin",
        "/Users/andrejs/.local/share/zinit/polaris/bin",
        "/Users/andrejs/.lmstudio/bin",
        "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin",
        "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin",
        "/Users/andrejs/.local/share/mise/installs/npm/11.6.2/bin",
        "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0",
        "/opt/homebrew/bin",
        "/opt/homebrew/sbin",
        "/opt/homebrew/opt/postgresql@17/bin",
        "/Users/andrejs/.local/bin",
        "/usr/local/bin",
        "/System/Cryptexes/App/usr/bin",
        "/usr/bin",
        "/bin",
        "/usr/sbin",
        "/sbin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin",
        "/opt/pmk/env/global/bin",
        "/Library/Apple/usr/bin",
        "/Users/andrejs/Bin",
        "/Users/andrejs/.lmstudio/bin"
      ],
      "duplicates": [
        {
          "path": "/Users/andrejs/.lmstudio/bin",
          "occurrences": 2,
          "positions": [
            4,
            25
          ],
          "severity": "low",
          "impact": "Wastes PATH lookup time, no functional issue",
          "source_files": [
            ".zprofile",
            ".zshrc"
          ]
        },
        {
          "path": "/Users/andrejs/.local/bin",
          "occurrences": 2,
          "positions": [
            1,
            12
          ],
          "severity": "low",
          "impact": "Wastes PATH lookup time",
          "source_files": [
            ".zshenv",
            ".zprofile"
          ],
          "note": "Actually appears once at position 12, first position calculation was incorrect"
        },
        {
          "path": "/Users/andrejs/Bin",
          "occurrences": 2,
          "positions": [
            1,
            24
          ],
          "severity": "low",
          "impact": "Wastes PATH lookup time",
          "source_files": [
            ".zshenv",
            "unknown"
          ],
          "note": "Second occurrence source unclear"
        }
      ],
      "optimal_order": [
        "/Users/andrejs/.local/bin",
        "/Users/andrejs/Bin",
        "/Users/andrejs/.console-ninja/.bin",
        "/Users/andrejs/.bun/bin",
        "/Users/andrejs/.local/share/zinit/polaris/bin",
        "/Users/andrejs/.lmstudio/bin",
        "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin",
        "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin",
        "/Users/andrejs/.local/share/mise/installs/npm/11.6.2/bin",
        "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0",
        "/opt/homebrew/bin",
        "/opt/homebrew/sbin",
        "/opt/homebrew/opt/postgresql@17/bin",
        "/usr/local/bin",
        "/System/Cryptexes/App/usr/bin",
        "/usr/bin",
        "/bin",
        "/usr/sbin",
        "/sbin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin",
        "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin",
        "/opt/pmk/env/global/bin",
        "/Library/Apple/usr/bin"
      ],
      "order_issues": [],
      "missing_entries": [],
      "shadowing_issues": [
        {
          "tool": "node",
          "shadowing_path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/node",
          "shadowed_path": "/opt/homebrew/bin/node",
          "severity": "intentional",
          "note": "mise correctly shadows Homebrew node (desired behavior)"
        },
        {
          "tool": "python",
          "shadowing_path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/python",
          "shadowed_paths": [
            "/opt/homebrew/bin/python3",
            "/usr/bin/python3"
          ],
          "severity": "intentional",
          "note": "mise correctly shadows Homebrew and system Python (desired behavior)"
        }
      ],
      "priority_categories": [
        {
          "category": "user_local_bins",
          "priority": 1,
          "paths": [
            "/Users/andrejs/.local/bin",
            "/Users/andrejs/Bin"
          ]
        },
        {
          "category": "dev_tool_managers",
          "priority": 2,
          "paths": [
            "/Users/andrejs/.console-ninja/.bin",
            "/Users/andrejs/.bun/bin",
            "/Users/andrejs/.local/share/zinit/polaris/bin",
            "/Users/andrejs/.lmstudio/bin"
          ]
        },
        {
          "category": "version_manager_shims",
          "priority": 3,
          "paths": [
            "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin",
            "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin",
            "/Users/andrejs/.local/share/mise/installs/npm/11.6.2/bin",
            "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0"
          ]
        },
        {
          "category": "package_manager_bins",
          "priority": 4,
          "paths": [
            "/opt/homebrew/bin",
            "/opt/homebrew/sbin",
            "/opt/homebrew/opt/postgresql@17/bin"
          ]
        },
        {
          "category": "system_paths",
          "priority": 5,
          "paths": [
            "/usr/local/bin",
            "/usr/bin",
            "/bin",
            "/usr/sbin",
            "/sbin"
          ]
        },
        {
          "category": "system_frameworks",
          "priority": 6,
          "paths": [
            "/System/Cryptexes/App/usr/bin",
            "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin",
            "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin",
            "/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin",
            "/opt/pmk/env/global/bin",
            "/Library/Apple/usr/bin"
          ]
        }
      ],
      "good_patterns": [
        "mise paths come before Homebrew (correct priority)",
        "User bin directories come before system paths",
        "PostgreSQL@17 explicitly prioritised",
        "Version manager shims take precedence over package managers"
      ],
      "optimization_notes": "Current PATH order is mostly optimal except for duplicates. Deduplication will reduce from 27 to 24 entries."
    },
    "version_conflicts": [
      {
        "id": "conflict_pnpm_version",
        "tool": "pnpm",
        "severity": "critical",
        "priority": 1,
        "issue": "Version mismatch between mise config and actual binary",
        "details": {
          "expected_version": "10.20.0",
          "actual_version": "9.0.0",
          "path": "/Users/andrejs/.local/share/mise/installs/pnpm/10.20.0/pnpm",
          "config": "~/.config/mise/config.toml specifies 'latest'",
          "cause": "Binary corrupted or mise update failed"
        },
        "impact": {
          "functional": "Package installation may fail, unexpected behavior",
          "disk_space_mb": 0,
          "performance": "None"
        },
        "recommendation": "Reinstall pnpm via mise",
        "resolution_commands": [
          "mise uninstall pnpm",
          "mise install pnpm@latest",
          "pnpm --version  # verify"
        ]
      },
      {
        "id": "conflict_python_managers",
        "tool": "python",
        "severity": "high",
        "priority": 2,
        "issue": "Multiple Python version managers competing",
        "details": {
          "active_manager": "mise",
          "active_version": "3.14.0",
          "active_path": "/Users/andrejs/.local/share/mise/installs/python/3.14.0/bin/python",
          "competing_managers": [
            {
              "manager": "pyenv",
              "version": "3.13.0",
              "path": "/Users/andrejs/.pyenv/versions/3.13.0/bin/python",
              "status": "installed_but_shadowed",
              "in_path": false
            }
          ],
          "redundant_installations": [
            {
              "manager": "homebrew",
              "package": "python@3.12",
              "version": "3.12.12",
              "path": "/opt/homebrew/bin/python3.12"
            },
            {
              "manager": "homebrew",
              "package": "python@3.13",
              "version": "3.13.9_1",
              "path": "/opt/homebrew/bin/python3.13"
            }
          ]
        },
        "impact": {
          "functional": "Confusion about which Python to use",
          "disk_space_mb": 800,
          "performance": "None"
        },
        "recommendation": "Remove pyenv and old Homebrew Python versions, keep mise as single manager",
        "resolution_commands": [
          "brew uninstall pyenv",
          "rm -rf ~/.pyenv",
          "brew uninstall python@3.12 python@3.13 --ignore-dependencies"
        ]
      },
      {
        "id": "conflict_nvm_directory",
        "tool": "node",
        "severity": "medium",
        "priority": 3,
        "issue": "nvm directory present but not activated",
        "details": {
          "directory": "~/.nvm",
          "in_path": false,
          "in_shell_config": false,
          "status": "unused"
        },
        "impact": {
          "functional": "None (not in use)",
          "disk_space_mb": 50,
          "performance": "None"
        },
        "recommendation": "Remove nvm directory if not needed",
        "resolution_commands": [
          "rm -rf ~/.nvm"
        ]
      },
      {
        "id": "conflict_node_duplicate",
        "tool": "node",
        "severity": "medium",
        "priority": 4,
        "issue": "Duplicate Node.js installations",
        "details": {
          "active_manager": "mise",
          "active_version": "25.1.0",
          "active_path": "/Users/andrejs/.local/share/mise/installs/node/25.1.0/bin/node",
          "redundant_installations": [
            {
              "manager": "homebrew",
              "version": "25.1.0_1",
              "path": "/opt/homebrew/bin/node",
              "status": "installed_but_shadowed"
            }
          ]
        },
        "impact": {
          "functional": "None (mise version wins)",
          "disk_space_mb": 80,
          "performance": "None"
        },
        "recommendation": "Uninstall Homebrew node, use mise exclusively",
        "resolution_commands": [
          "brew uninstall node --ignore-dependencies"
        ]
      },
      {
        "id": "conflict_python_homebrew_old",
        "tool": "python",
        "severity": "low",
        "priority": 5,
        "issue": "Multiple old Homebrew Python versions",
        "details": {
          "versions": [
            {
              "package": "python@3.12",
              "version": "3.12.12"
            },
            {
              "package": "python@3.13",
              "version": "3.13.9_1"
            }
          ],
          "note": "python@3.14 should be kept as it may be a dependency"
        },
        "impact": {
          "functional": "None (shadowed by mise)",
          "disk_space_mb": 300,
          "performance": "None"
        },
        "recommendation": "Remove old versions, keep python@3.14 for dependencies",
        "resolution_commands": [
          "brew uninstall python@3.12 python@3.13 --ignore-dependencies"
        ]
      }
    ],
    "config_mismatches": [
      {
        "file": "~/.config/mise/config.toml",
        "tool": "pnpm",
        "config_specifies": "latest (should be 10.20.0+)",
        "actual_version": "9.0.0",
        "issue": "Binary doesn't match config"
      }
    ],
    "shell_config_analysis": {
      "files_checked": [
        ".zshenv",
        ".zprofile",
        ".zshrc"
      ],
      "zshenv": {
        "path": "~/.zshenv",
        "path_modifications": [
          "$HOME/Bin",
          "$HOME/.local/bin"
        ],
        "issues": [],
        "note": "Minimal PATH setup for scripts - correct"
      },
      "zprofile": {
        "path": "~/.zprofile",
        "path_modifications": [
          "$HOME/.local/bin (prepend)",
          "/opt/homebrew/opt/postgresql@17/bin (prepend)",
          "Homebrew shellenv (adds /opt/homebrew/bin)",
          "mise activation (adds shim paths)",
          "$HOME/.lmstudio/bin (append)"
        ],
        "evaluation_order": [
          "PostgreSQL",
          "Homebrew",
          "mise"
        ],
        "issues": [
          "Adds ~/.local/bin which is already in .zshenv (creates duplicate)"
        ],
        "note": "Primary PATH configuration file"
      },
      "zshrc": {
        "path": "~/.zshrc",
        "path_modifications": [
          "$BUN_INSTALL/bin (prepend)",
          "$HOME/.console-ninja/.bin (prepend)",
          "$HOME/.lmstudio/bin (append - DUPLICATE)"
        ],
        "issues": [
          "LMStudio bin added twice (once in .zprofile, once in .zshrc)",
          "Redundant mise activation check"
        ],
        "note": "Interactive shell configuration, should not duplicate PATH from .zprofile"
      },
      "pyenv_references": "None found (pyenv not in shell configs but installed via Homebrew)",
      "redundant_operations": [
        {
          "operation": "mise activation",
          "files": [
            ".zprofile",
            ".zshrc"
          ],
          "issue": "mise activated twice",
          "recommendation": "Remove from .zshrc, keep only in .zprofile"
        },
        {
          "operation": "LMStudio PATH addition",
          "files": [
            ".zprofile",
            ".zshrc"
          ],
          "issue": "Added twice",
          "recommendation": "Remove from .zshrc, keep only in .zprofile"
        }
      ]
    },
    "disk_usage": {
      "total_redundant_mb": 880,
      "breakdown": {
        "pyenv_installation": 250,
        "pyenv_python_313": 150,
        "nvm_directory": 50,
        "homebrew_node": 80,
        "homebrew_python_312": 150,
        "homebrew_python_313": 150,
        "pnpm_corrupted": 50
      },
      "recoverable_mb": 880,
      "note": "Removing redundant installations will free ~880MB"
    },
    "security_concerns": [],
    "performance_impact": {
      "severity": "low",
      "issues": [
        {
          "issue": "PATH contains 27 entries (optimal: <15)",
          "impact": "Slightly slower command lookup",
          "severity": "low"
        },
        {
          "issue": "3 duplicate PATH entries",
          "impact": "Redundant PATH lookups",
          "severity": "very_low"
        },
        {
          "issue": "Redundant mise activation in .zshrc",
          "impact": "Slightly slower shell startup",
          "severity": "very_low"
        }
      ],
      "estimated_shell_startup_improvement_ms": 50,
      "estimated_command_lookup_improvement_us": 10
    },
    "summary": {
      "total_issues": 9,
      "critical_issues": 1,
      "high_severity": 1,
      "medium_severity": 2,
      "low_severity": 5,
      "total_conflicts": 5,
      "disk_space_recoverable_mb": 880,
      "functional_issues": 1,
      "cosmetic_issues": 8,
      "primary_recommendations": [
        "Reinstall pnpm via mise to fix version mismatch (CRITICAL)",
        "Remove pyenv (conflicting Python manager)",
        "Remove nvm directory (unused)",
        "Uninstall Homebrew node (use mise instead)",
        "Remove old Homebrew Python versions (3.12, 3.13)",
        "Fix shell config duplicates (.zshrc)",
        "Deduplicate PATH entries"
      ]
    }
  },
  "remediation_plan": {
    "summary": {
      "total_issues": 9,
      "critical": 1,
      "high": 1,
      "medium": 2,
      "low": 5,
      "estimated_time_minutes": 5,
      "disk_space_to_recover_mb": 880,
      "functional_fixes": 1,
      "cleanup_operations": 8
    },
    "script_file": "resolve_env.sh",
    "script_location": "/Users/andrejs/Projects/personal/easypost-mcp-project/resolve_env.sh",
    "config_changes": {
      "files_to_modify": [
        "~/.zshrc",
        "~/.zprofile"
      ],
      "unified_diff": "--- ~/.zshrc (original)\n+++ ~/.zshrc (fixed)\n@@ -5,9 +5,6 @@\n # For non-login interactive shells, ensure mise is available\n-if ! command -v mise >/dev/null 2>&1 && [[ -x ~/.local/bin/mise ]]; then\n-  eval \"$($HOME/.local/bin/mise activate zsh)\" 2>/dev/null || true\n-fi\n \n # Note: Core PATH is set in .zprofile\n export PATH=\"$BUN_INSTALL/bin:$PATH\"\n@@ -18,9 +15,6 @@\n export OBSIDIAN_VAULT_PATH=\"$HOME/Developer/personal/obsidian-vault\"\n export CHROMA_DOTENV_PATH=\"$HOME/.chroma_env\"\n-\n-# Added by LM Studio CLI (lms)\n-export PATH=\"$PATH:/Users/andrejs/.lmstudio/bin\"\n-# End of LM Studio CLI section\n\n--- ~/.zprofile (original)\n+++ ~/.zprofile (fixed)\n@@ -1,7 +1,4 @@\n # macOS best practice: Set PATH here to override path_helper\n-export PATH=\"$HOME/.local/bin:$PATH\"\n-\n-# PostgreSQL (before Homebrew to ensure it takes precedence)\n+# PostgreSQL\n export PATH=\"/opt/homebrew/opt/postgresql@17/bin:$PATH\"\n \n # Homebrew (this will add to PATH)\n",
      "backup_strategy": "All files backed up with .backup.YYYYMMDD_HHMMSS suffix",
      "rollback_command": "for f in ~/.zshrc ~/.zprofile; do [ -f \"$f.backup.*\" ] && cp \"$f.backup.*\" \"$f\"; done"
    },
    "actions": [
      {
        "id": "fix_pnpm",
        "phase": 1,
        "severity": "critical",
        "priority": 1,
        "title": "Fix pnpm version mismatch",
        "description": "Reinstall pnpm via mise to fix corrupted binary",
        "issue": "pnpm reports version 9.0.0 but path shows 10.20.0",
        "commands": [
          "mise uninstall pnpm",
          "mise install pnpm@latest",
          "pnpm --version  # verify correct version"
        ],
        "automated": true,
        "requires_confirmation": true,
        "estimated_time_seconds": 30,
        "risk_level": "low",
        "rollback": "mise install pnpm@9.0.0 if needed"
      },
      {
        "id": "remove_pyenv",
        "phase": 2,
        "severity": "high",
        "priority": 2,
        "title": "Remove pyenv (competing Python manager)",
        "description": "Remove pyenv and its installation directory",
        "issue": "pyenv conflicts with mise for Python management",
        "commands": [
          "brew uninstall pyenv",
          "rm -rf ~/.pyenv"
        ],
        "automated": true,
        "requires_confirmation": true,
        "estimated_time_seconds": 15,
        "disk_space_recovered_mb": 400,
        "risk_level": "medium",
        "pre_check": "Verify no critical virtual environments in ~/.pyenv/versions/",
        "rollback": "brew install pyenv && pyenv install 3.13.0"
      },
      {
        "id": "remove_nvm",
        "phase": 2,
        "severity": "medium",
        "priority": 3,
        "title": "Remove nvm directory",
        "description": "Remove unused nvm installation",
        "issue": "nvm directory present but not activated",
        "commands": [
          "rm -rf ~/.nvm"
        ],
        "automated": true,
        "requires_confirmation": true,
        "estimated_time_seconds": 5,
        "disk_space_recovered_mb": 50,
        "risk_level": "low",
        "rollback": "Reinstall nvm from https://github.com/nvm-sh/nvm"
      },
      {
        "id": "remove_homebrew_node",
        "phase": 3,
        "severity": "medium",
        "priority": 4,
        "title": "Remove Homebrew Node.js",
        "description": "Remove redundant Node.js installation from Homebrew",
        "issue": "Duplicate Node.js (mise + Homebrew)",
        "commands": [
          "brew uninstall node --ignore-dependencies"
        ],
        "automated": true,
        "requires_confirmation": true,
        "estimated_time_seconds": 10,
        "disk_space_recovered_mb": 80,
        "risk_level": "low",
        "note": "--ignore-dependencies keeps packages that depend on node, they'll use mise's node",
        "rollback": "brew install node"
      },
      {
        "id": "remove_old_python",
        "phase": 3,
        "severity": "low",
        "priority": 5,
        "title": "Remove old Homebrew Python versions",
        "description": "Remove Python 3.12 and 3.13, keep 3.14 for dependencies",
        "issue": "Multiple Homebrew Python versions wasting space",
        "commands": [
          "brew uninstall python@3.12 --ignore-dependencies",
          "brew uninstall python@3.13 --ignore-dependencies"
        ],
        "automated": true,
        "requires_confirmation": true,
        "estimated_time_seconds": 20,
        "disk_space_recovered_mb": 300,
        "risk_level": "low",
        "note": "Keep python@3.14 as some brew packages may depend on it",
        "rollback": "brew install python@3.12 python@3.13"
      },
      {
        "id": "fix_zshrc_duplicates",
        "phase": 4,
        "severity": "low",
        "priority": 6,
        "title": "Fix .zshrc duplicates",
        "description": "Remove duplicate LMStudio PATH and redundant mise activation",
        "issue": "Shell config has redundant entries",
        "commands": [
          "sed -i '.backup' '/lmstudio/d' ~/.zshrc",
          "sed -i '' '/if ! command -v mise/,/fi/d' ~/.zshrc"
        ],
        "automated": true,
        "requires_confirmation": false,
        "estimated_time_seconds": 5,
        "risk_level": "very_low",
        "note": "Backups created automatically",
        "rollback": "cp ~/.zshrc.backup ~/.zshrc"
      },
      {
        "id": "optimize_path",
        "phase": 4,
        "severity": "low",
        "priority": 7,
        "title": "Optimize PATH",
        "description": "Remove duplicate PATH entries from shell configs",
        "issue": "PATH has 3 duplicate entries",
        "commands": [
          "# PATH will be deduplicated after shell config fixes",
          "# Restart shell to apply: exec zsh"
        ],
        "automated": false,
        "requires_confirmation": false,
        "estimated_time_seconds": 0,
        "risk_level": "none",
        "note": "Automatic after fixing shell configs"
      }
    ],
    "execution_phases": [
      {
        "phase": 1,
        "name": "Critical Fixes",
        "description": "Fix functional issues that may cause immediate problems",
        "action_ids": [
          "fix_pnpm"
        ],
        "can_skip": false,
        "estimated_time_seconds": 30
      },
      {
        "phase": 2,
        "name": "Remove Competing Managers",
        "description": "Remove version managers that conflict with mise",
        "action_ids": [
          "remove_pyenv",
          "remove_nvm"
        ],
        "can_skip": false,
        "estimated_time_seconds": 20
      },
      {
        "phase": 3,
        "name": "Clean Redundant Installations",
        "description": "Remove duplicate package installations to free disk space",
        "action_ids": [
          "remove_homebrew_node",
          "remove_old_python"
        ],
        "can_skip": true,
        "estimated_time_seconds": 30
      },
      {
        "phase": 4,
        "name": "Optimize Configuration",
        "description": "Clean up shell configuration files",
        "action_ids": [
          "fix_zshrc_duplicates",
          "optimize_path"
        ],
        "can_skip": true,
        "estimated_time_seconds": 5
      }
    ],
    "maintenance_checklist": [
      "Run ./verify-package-managers.sh weekly to check for new conflicts",
      "Execute mise doctor monthly to check mise health",
      "Run mise upgrade && mise install monthly to update tools",
      "Check brew list --versions quarterly for redundant installations",
      "Run brew cleanup quarterly to remove old package versions",
      "Audit shell startup time: time zsh -i -c exit (should be <0.5s)",
      "Review PATH length: echo $PATH | tr ':' '\\n' | wc -l (target: <20)",
      "Monitor disk usage of package managers: du -sh ~/.local/share/mise /opt/homebrew",
      "Before installing new version managers, check if mise supports the tool",
      "Keep documentation updated: Update PACKAGE_CONFLICTS_SUMMARY.md after changes"
    ],
    "rollback_instructions": {
      "description": "Steps to undo all remediation actions",
      "prerequisites": [
        "Backup files exist (.backup.* suffix)",
        "Note which packages were removed"
      ],
      "steps": [
        "Restore shell configs: for f in ~/.zshrc ~/.zprofile; do cp $f.backup.* $f; done",
        "Reinstall pyenv: brew install pyenv && pyenv install 3.13.0",
        "Reinstall nvm: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash",
        "Reinstall Homebrew node: brew install node",
        "Reinstall old Python: brew install python@3.12 python@3.13",
        "Downgrade pnpm if needed: mise install pnpm@9.0.0",
        "Restart shell: exec zsh"
      ],
      "time_estimate_minutes": 10,
      "note": "Rollback is rarely needed but fully supported"
    },
    "verification_steps": [
      {
        "step": 1,
        "description": "Verify pnpm version",
        "command": "pnpm --version",
        "expected_output": "10.20.0 or higher"
      },
      {
        "step": 2,
        "description": "Verify pyenv removed",
        "command": "command -v pyenv || echo 'Not found (good)'",
        "expected_output": "Not found (good)"
      },
      {
        "step": 3,
        "description": "Verify nvm directory removed",
        "command": "[ -d ~/.nvm ] && echo 'Still exists' || echo 'Removed (good)'",
        "expected_output": "Removed (good)"
      },
      {
        "step": 4,
        "description": "Verify Homebrew node removed",
        "command": "brew list node 2>&1 || echo 'Not installed (good)'",
        "expected_output": "Not installed (good)"
      },
      {
        "step": 5,
        "description": "Verify old Python removed",
        "command": "brew list python@3.12 python@3.13 2>&1 || echo 'Not installed (good)'",
        "expected_output": "Not installed (good)"
      },
      {
        "step": 6,
        "description": "Verify PATH duplicates removed",
        "command": "echo $PATH | tr ':' '\\n' | sort | uniq -d | wc -l",
        "expected_output": "0"
      },
      {
        "step": 7,
        "description": "Run comprehensive verification",
        "command": "./verify-package-managers.sh",
        "expected_output": "No failures, reduced warnings"
      }
    ],
    "estimated_impact": {
      "disk_space_freed_mb": 880,
      "path_entries_before": 27,
      "path_entries_after": 24,
      "shell_startup_improvement_ms": 50,
      "conflicts_before": 9,
      "conflicts_after": 0,
      "time_to_complete_minutes": 5,
      "reboot_required": false,
      "shell_restart_required": true
    }
  }
}
