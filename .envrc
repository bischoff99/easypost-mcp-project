# Auto-load environment variables
# Install: brew install direnv
# Activate: eval "$(direnv hook zsh)"

# Load secrets from macOS Keychain (secure)
export EASYPOST_API_KEY=$(security find-generic-password -s "easypost-api-key" -w 2>/dev/null)
export EASYPOST_TEST_KEY=$(security find-generic-password -s "easypost-api-key" -w 2>/dev/null)
export DATABASE_URL=$(security find-generic-password -s "easypost-database-url" -w 2>/dev/null)

# Python virtual environment
layout python python3

# Load .env if exists
dotenv_if_exists .env

# Add local bin to PATH
PATH_add backend/venv/bin
PATH_add node_modules/.bin

# Export common vars
export PYTHONPATH="${PWD}/backend/src:${PYTHONPATH}"
export NODE_ENV=development
export ENVIRONMENT=development

# Allow direnv
# Run: direnv allow
