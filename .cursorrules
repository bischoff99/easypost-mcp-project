# Cursor IDE Project Configuration

## Project: EasyPost MCP
**Type**: Full-stack shipping and logistics automation
**Stack**: FastAPI (Python) + React + PostgreSQL
**Hardware**: M3 Max (16 cores, 128GB RAM) - Optimized for parallel processing

## Quick Reference

### The 5 Core Commands
Read full documentation in `.cursor/commands/README.md`

1. **/test** - Parallel testing (16 workers, 4-6s)
2. **/fix** - Auto-repair errors with context
3. **/explain** - AI-powered code understanding
4. **/optimize** - M3 Max hardware optimizations
5. **/api [path] [method]** - Generate FastAPI endpoint

### Project-Specific Commands
- **/ep-test** - Run EasyPost tests with parallel execution
- **/ep-dev** - Start development environment
- **/ep-benchmark** - Performance benchmarks

## Configuration System

All commands read from `.dev-config.json`:
- **Stack details**: `{{stack.backend.framework}}` â†’ "fastapi"
- **Hardware specs**: `{{hardware.workers.pytest}}` â†’ 16
- **Conventions**: `{{conventions.python.functions}}` â†’ "snake_case"
- **Paths**: `{{paths.backend}}` â†’ "backend/src"

## Project Standards

### Code Conventions
- **Python**: snake_case functions, PascalCase classes, type hints required, 100 char line length
- **JavaScript**: camelCase functions, PascalCase components, ESLint + Prettier
- **Async-first**: All I/O operations use async/await patterns
- **M3 Max optimization**: 16-32 parallel workers for bulk operations

### Architecture Patterns
- **Hybrid data model**: EasyPost API (primary) + PostgreSQL (secondary storage/analytics)
- **MCP tools**: FastMCP server with tools, resources, and prompts
- **Error handling**: Try/except with detailed logging, standardized response format
- **Testing**: pytest (16 workers), vitest (20 workers), parallel execution via pytest-xdist

### File Organization
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.py              # FastAPI HTTP server
â”‚   â”œâ”€â”€ mcp/__init__.py         # MCP server
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ easypost_service.py  # EasyPost API wrapper (32-40 workers)
â”‚   â”‚   â””â”€â”€ database_service.py  # PostgreSQL CRUD (548 lines)
â”‚   â””â”€â”€ models.py              # SQLAlchemy models (9 tables)
frontend/
â””â”€â”€ src/
    â”œâ”€â”€ pages/                 # React pages
    â”œâ”€â”€ components/            # Reusable components
    â””â”€â”€ services/api.js        # API client

.cursor/
â”œâ”€â”€ rules/                     # Coding standards (14 .mdc files)
â”œâ”€â”€ commands/                  # Slash commands (8 core commands)
â””â”€â”€ config/                    # Templates
```

### Key Patterns

**Standardized API Response**:
```python
{
  "status": "success" | "error",
  "data": {...},
  "message": "optional message",
  "request_id": "uuid"
}
```

**Parallel Processing** (M3 Max):
```python
# Use asyncio.gather with 16 workers
async def process_batch(items: List, workers: int = 16):
    results = await asyncio.gather(*[
        process_item(item) for item in items
    ])
    return results
```

**Database Queries** (Prevent N+1):
```python
# Use selectinload for eager loading
stmt = select(Shipment).options(
    selectinload(Shipment.from_address),
    selectinload(Shipment.to_address)
)
```

## Development Workflow

### Common Tasks
```bash
# Start everything
make dev                    # Backend + Frontend

# Testing
make test                   # All tests (16 workers)
make test-cov              # With coverage

# Code quality
make lint                   # All linters
make format                # Auto-format

# Database
alembic upgrade head        # Run migrations
alembic revision -m "msg"  # Create migration
```

### VS Code Tasks
Available via `Cmd+Shift+P` â†’ "Run Task":
- ğŸš€ Dev: Full Stack
- ğŸ§ª Test: Backend (with watcher)
- ğŸ” Lint: Backend/Frontend
- ğŸ¨ Format: Backend/Frontend
- ğŸ³ Docker: Build/Start/Stop

## MCP Integration

**MCP Server**: `python -m src.mcp`

**Available Tools**:
- `create_shipment`: Create shipment with label
- `track_shipment`: Track by tracking number
- `get_rates`: Compare carrier rates
- `create_bulk_shipments`: Parallel bulk creation (16 workers)
- `batch_track_shipments`: Track multiple packages

## Performance Expectations (M3 Max)

| Operation | Time | Workers |
|-----------|------|---------|
| Test suite | 4-6s | 16 |
| Bulk shipment creation (100) | 30-40s | 16 |
| Batch tracking (50) | 2-3s | 16 |
| Analytics (1000 shipments) | 1-2s | 16 |

## Important Notes

- **PostgreSQL required**: Database URL in .env
- **EasyPost API key**: Test key (EZTK*) for development
- **Environment files**: .env.development (committed), .env (gitignored)
- **Documentation**: See .cursor/commands/README.md for detailed command docs
- **Rules**: See .cursor/rules/ for comprehensive coding standards (14 files)

## Getting Started

1. **Install recommended extensions**: Cmd+Shift+P â†’ "Extensions: Show Recommended"
2. **Start development**: `make dev` or use VS Code task
3. **Try a command**: Type `/test` in Cursor chat
4. **Read more**: See `.cursor/commands/README.md` for full documentation

---

*For comprehensive documentation, explore `.cursor/` directory.*
*For project-specific details, see `CLAUDE.md` and `POSTGRESQL_IMPLEMENTATION_REVIEW.md`.*
