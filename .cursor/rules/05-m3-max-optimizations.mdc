---
<<<<<<< HEAD
description: 'Essential optimization patterns for personal use'
||||||| 7a576da
description: "Hardware-specific optimizations for M3 Max (16 cores, 128GB RAM)"
=======
description: "Essential optimization patterns for personal use"
>>>>>>> 99314e0f7fef772f5a4f4779d02c1c7df730f0d8
globs: []
alwaysApply: false
version: '1.0.0'
lastUpdated: '2025-11-18'
---

# Essential Optimizations

Simple optimization patterns for personal development projects.

## Core Principles

- Use async/await for I/O operations
- Parallel processing when beneficial (not excessive)
- Connection pooling for databases
- Auto-detect worker counts (adapts to machine)

## Python Optimizations

### Async/Await for I/O

```python
import asyncio

async def process_items(items: list):
    """Process items concurrently."""
    results = await asyncio.gather(*[
        process_item(item) for item in items
    ])
    return results
```

### Connection Pooling

```python
from sqlalchemy.ext.asyncio import create_async_engine

engine = create_async_engine(
    DATABASE_URL,
    pool_size=10,          # Reasonable for personal use
    max_overflow=20,       # Allow some burst capacity
    pool_pre_ping=True,    # Verify connections
)
```

### ThreadPoolExecutor (When Needed)

```python
from concurrent.futures import ThreadPoolExecutor
import multiprocessing

cpu_count = multiprocessing.cpu_count()
max_workers = min(16, cpu_count)  # 8-16 workers sufficient
executor = ThreadPoolExecutor(max_workers=max_workers)
```

## Testing

### Pytest Configuration

```ini
# Auto-detect workers (adapts to machine)
addopts = -v -n auto
```

## Frontend Optimizations

### Vite Configuration

```javascript
export default defineConfig({
  build: {
    target: 'es2020',
    minify: 'esbuild',
    codeSplitting: true,
  },
});
```

## Key Points

- **Don't over-optimize**: Simple patterns are often enough
- **Auto-detect**: Let tools adapt to available resources
- **Measure first**: Optimize only when needed
- **Keep it simple**: Complexity adds maintenance burden

---

Keep optimizations simple and appropriate for personal use.
