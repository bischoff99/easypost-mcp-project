Refactor visible code: {{pattern}}

Common patterns:
- "extract service" - Move logic to service layer
- "add error handling" - Add try/except with logging
- "improve types" - Add type hints/validation
- "optimize performance" - Apply M3 Max optimizations
- "split component" - Break into smaller components

Process:
1. Analyze current code structure
2. Identify improvements
3. Apply refactoring pattern
4. Maintain existing functionality
5. Update tests if needed

Follow project conventions from .dev-config.json.
Show before/after code comparison.